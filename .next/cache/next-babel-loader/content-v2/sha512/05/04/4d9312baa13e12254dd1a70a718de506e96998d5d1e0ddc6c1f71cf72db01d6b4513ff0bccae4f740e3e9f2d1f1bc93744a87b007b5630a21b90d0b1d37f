{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Cookies from 'js-cookie';\nimport { ADD_TO_CART, LOAD_CART, REMOVE_FROM_CART, DECREASE_QUANTITY, INCREASE_QUANTITY, EMPTY_CART } from '@/actions/types';\nexport const initialState = {\n  cartItems: []\n};\nexport const itemsWithQuantities = cart => {\n  return cart.reduce((acc, item) => {\n    const found = acc.find(_item => _item._id === item._id);\n\n    if (found) {\n      found.quantity = found.quantity + 1;\n    } else {\n      acc.push(_objectSpread({\n        quantity: 1\n      }, item));\n    }\n\n    return acc;\n  }, []);\n};\nexport const CartReducer = (state = initialState, action) => {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case LOAD_CART:\n      Cookies.get('my_order') === undefined && Cookies.set('my_order', []);\n      const existingCartItems = Cookies.get('my_order') && JSON.parse(Cookies.get('my_order'));\n      const countSameItems = itemsWithQuantities(existingCartItems);\n      return {\n        cartItems: existingCartItems.length < 1 ? existingCartItems : countSameItems\n      };\n\n    case ADD_TO_CART:\n      Cookies.set('my_order', itemsWithQuantities([...state.cartItems, payload]));\n      return {\n        cartItems: itemsWithQuantities([...state.cartItems, payload])\n      };\n\n    case REMOVE_FROM_CART:\n      const remainedItems = state.cartItems.filter(x => x._id !== payload);\n      Cookies.set('my_order', remainedItems);\n      return {\n        cartItems: remainedItems\n      };\n\n    case DECREASE_QUANTITY:\n      const filteredItems = state.cartItems.filter(x => x._id === payload);\n      const otherItems = state.cartItems.filter(x => x._id !== payload);\n      Cookies.set('my_order', [...otherItems, _objectSpread(_objectSpread({}, filteredItems[0]), {}, {\n        quantity: filteredItems[0].quantity <= 1 ? 1 : filteredItems[0].quantity - 1\n      })]);\n      return {\n        cartItems: [...otherItems, _objectSpread(_objectSpread({}, filteredItems[0]), {}, {\n          quantity: filteredItems[0].quantity <= 1 ? 1 : filteredItems[0].quantity - 1\n        })]\n      };\n\n    case INCREASE_QUANTITY:\n      const filteredItems1 = state.cartItems.filter(x => x._id === payload);\n      const othersItems = state.cartItems.filter(x => x._id !== payload);\n      Cookies.set('my_order', [...othersItems, _objectSpread(_objectSpread({}, filteredItems1[0]), {}, {\n        quantity: filteredItems1[0].quantity === filteredItems1[0].countInStock ? filteredItems1[0].countInStock : +1\n      })]);\n      return {\n        cartItems: [...othersItems, _objectSpread(_objectSpread({}, filteredItems1[0]), {}, {\n          quantity: filteredItems1[0].quantity === filteredItems1[0].countInStock ? filteredItems1[0].countInStock : +1\n        })]\n      };\n\n    case EMPTY_CART:\n      Cookies.remove('my_order');\n      return {\n        cartItems: []\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/stenolmre/Desktop/learn/reducers/cart.js"],"names":["Cookies","ADD_TO_CART","LOAD_CART","REMOVE_FROM_CART","DECREASE_QUANTITY","INCREASE_QUANTITY","EMPTY_CART","initialState","cartItems","itemsWithQuantities","cart","reduce","acc","item","found","find","_item","_id","quantity","push","CartReducer","state","action","type","payload","get","undefined","set","existingCartItems","JSON","parse","countSameItems","length","remainedItems","filter","x","filteredItems","otherItems","filteredItems1","othersItems","countInStock","remove"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie'\n\nimport { ADD_TO_CART, LOAD_CART, REMOVE_FROM_CART, DECREASE_QUANTITY, INCREASE_QUANTITY, EMPTY_CART } from '@/actions/types'\n\nexport const initialState = {\n  cartItems: []\n}\n\nexport const itemsWithQuantities = (cart) => {\n  return cart.reduce((acc, item) => {\n    const found = acc.find(_item => _item._id === item._id)\n\n    if (found) {\n      found.quantity = found.quantity + 1\n    } else {\n      acc.push({\n        quantity: 1,\n        ...item\n      })\n    }\n\n    return acc\n  }, [])\n}\n\nexport const CartReducer = (state = initialState, action) => {\n  const { type, payload } = action\n\n  switch (type) {\n    case LOAD_CART:\n      Cookies.get('my_order') === undefined && Cookies.set('my_order', [])\n\n      const existingCartItems = Cookies.get('my_order') && JSON.parse(Cookies.get('my_order'))\n\n      const countSameItems = itemsWithQuantities(existingCartItems)\n      return {\n        cartItems: existingCartItems.length < 1 ? existingCartItems : countSameItems\n      }\n    case ADD_TO_CART:\n      Cookies.set('my_order', itemsWithQuantities([...state.cartItems, payload]))\n\n      return {\n        cartItems: itemsWithQuantities([...state.cartItems, payload])\n      }\n    case REMOVE_FROM_CART:\n      const remainedItems = state.cartItems.filter(x => x._id !== payload)\n\n      Cookies.set('my_order', remainedItems)\n\n      return {\n        cartItems: remainedItems\n      }\n    case DECREASE_QUANTITY:\n      const filteredItems = state.cartItems.filter(x => x._id === payload)\n\n      const otherItems = state.cartItems.filter(x => x._id !== payload)\n\n      Cookies.set('my_order', [...otherItems, { ...filteredItems[0], quantity: filteredItems[0].quantity <= 1 ? 1 : filteredItems[0].quantity - 1}])\n\n      return {\n        cartItems: [...otherItems, { ...filteredItems[0], quantity: filteredItems[0].quantity <= 1 ? 1 : filteredItems[0].quantity - 1}]\n      }\n    case INCREASE_QUANTITY:\n      const filteredItems1 = state.cartItems.filter(x => x._id === payload)\n\n      const othersItems = state.cartItems.filter(x => x._id !== payload)\n\n      Cookies.set('my_order', [...othersItems, { ...filteredItems1[0], quantity: filteredItems1[0].quantity === filteredItems1[0].countInStock ? filteredItems1[0].countInStock : + 1}])\n\n      return {\n        cartItems: [...othersItems, { ...filteredItems1[0], quantity: filteredItems1[0].quantity === filteredItems1[0].countInStock ? filteredItems1[0].countInStock : + 1}]\n      }\n    case EMPTY_CART:\n      Cookies.remove('my_order')\n\n      return {\n        cartItems: []\n      }\n    default:\n      return state\n  }\n}\n"]},"metadata":{},"sourceType":"module"}